---
# Source: milvus/charts/pulsar/templates/bookkeeper-pdb.yaml
#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
apiVersion: policy/v1beta1
kind: PodDisruptionBudget
metadata:
  name: "sfe-milvus-pulsar-bookkeeper"
  namespace: default
  labels:
    app: pulsar
    chart: pulsar-1.0.31
    release: sfe-milvus
    heritage: Helm
    component: bookkeeper
    cluster: sfe-milvus-pulsar
spec:
  selector:
    matchLabels:
      app: pulsar
      release: sfe-milvus
      component: bookkeeper
  maxUnavailable: 1
---
# Source: milvus/charts/pulsar/templates/broker-deployment/broker-pdb.yaml
#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
apiVersion: policy/v1beta1
kind: PodDisruptionBudget
metadata:
  name: "sfe-milvus-pulsar-broker"
  namespace: default
  labels:
    app: pulsar
    chart: pulsar-1.0.31
    release: sfe-milvus
    heritage: Helm
    component: broker
    cluster: sfe-milvus-pulsar
spec:
  selector:
    matchLabels:
      app: pulsar
      release: sfe-milvus
      component: broker
  maxUnavailable: 1
---
# Source: milvus/charts/pulsar/templates/proxy-pdb.yaml
#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
apiVersion: policy/v1beta1
kind: PodDisruptionBudget
metadata:
  name: "sfe-milvus-pulsar-proxy"
  namespace: default
  labels:
    app: pulsar
    chart: pulsar-1.0.31
    release: sfe-milvus
    heritage: Helm
    component: proxy
    cluster: sfe-milvus-pulsar
spec:
  selector:
    matchLabels:
      app: pulsar
      release: sfe-milvus
      component: proxy
  maxUnavailable: 1
---
# Source: milvus/charts/pulsar/templates/zookeeper/zookeeper-pdb.yaml
#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
apiVersion: policy/v1beta1
kind: PodDisruptionBudget
metadata:
  name: "sfe-milvus-pulsar-zookeeper"
  namespace: default
  labels:
    app: pulsar
    chart: pulsar-1.0.31
    release: sfe-milvus
    heritage: Helm
    component: zookeeper
    cluster: sfe-milvus-pulsar
spec:
  selector:
    matchLabels:
      app: pulsar
      release: sfe-milvus
      component: zookeeper
  maxUnavailable: 1
---
# Source: milvus/charts/pulsar/templates/autorecovery-configmap.yaml
#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
apiVersion: v1
kind: ConfigMap
metadata:
  name: "sfe-milvus-pulsar-autorecovery"
  namespace: default
  labels:
    app: pulsar
    chart: pulsar-1.0.31
    release: sfe-milvus
    heritage: Helm
    component: autorecovery
    cluster: sfe-milvus-pulsar
data:
  zkServers:
    sfe-milvus-pulsar-zookeeper-ca:2181
  BOOKIE_MEM: '" -Xms512m -Xmx512m -XX:+ExitOnOutOfMemoryError"'
  PULSAR_EXTRA_OPTS: -Dpulsar.log.root.level=info
  PULSAR_LOG_LEVEL: info
  PULSAR_LOG_ROOT_LEVEL: info
---
# Source: milvus/charts/pulsar/templates/bastion-configmap.yaml
#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
apiVersion: v1
kind: ConfigMap
metadata:
  name: "sfe-milvus-pulsar-bastion"
  namespace: default
  labels:
    app: pulsar
    chart: pulsar-1.0.31
    release: sfe-milvus
    heritage: Helm
    component: bastion
    cluster: sfe-milvus-pulsar
data:
  tlsTrustCertsFilePath: "/etc/ssl/certs/ca-certificates.crt"
  PULSAR_EXTRA_OPTS: -Dpulsar.log.root.level=info
  PULSAR_LOG_LEVEL: info
  PULSAR_LOG_ROOT_LEVEL: info
  PULSAR_MEM: '"-Xms256m -Xmx256m -XX:MaxDirectMemorySize=256m -XX:+ExitOnOutOfMemoryError"'
---
# Source: milvus/charts/pulsar/templates/bookkeeper-configmap.yaml
#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#

apiVersion: v1
kind: ConfigMap
metadata:
  name: "sfe-milvus-pulsar-bookkeeper"
  namespace: default
  labels:
    app: pulsar
    chart: pulsar-1.0.31
    release: sfe-milvus
    heritage: Helm
    component: bookkeeper
    cluster: sfe-milvus-pulsar
data:
  zkServers:
    sfe-milvus-pulsar-zookeeper-ca:2181
  # disable auto recovery on bookies since we will start AutoRecovery in separated pods
  autoRecoveryDaemonEnabled: "false"
  # In k8s always want to use hostname as bookie ID since IP addresses are ephemeral
  useHostNameAsBookieID: "true"
  # HTTP server used by health check
  httpServerEnabled: "true"
  BOOKIE_GC: '"-XX:+UseG1GC"'
  BOOKIE_MEM: '"-Xms4096m -Xmx4096m -XX:MaxDirectMemorySize=8192m -Dio.netty.leakDetectionLevel=disabled
    -Dio.netty.recycler.linkCapacity=1024 -XX:+UseG1GC -XX:MaxGCPauseMillis=10 -XX:+ParallelRefProcEnabled
    -XX:+UnlockExperimentalVMOptions -XX:+AggressiveOpts -XX:+DoEscapeAnalysis -XX:ParallelGCThreads=32
    -XX:ConcGCThreads=32 -XX:G1NewSizePercent=50 -XX:+DisableExplicitGC -XX:-ResizePLAB
    -XX:+ExitOnOutOfMemoryError -XX:+PerfDisableSharedMem -verbosegc"'
  PULSAR_EXTRA_OPTS: -Dpulsar.log.root.level=info
  PULSAR_LOG_LEVEL: info
  PULSAR_LOG_ROOT_LEVEL: info
  nettyMaxFrameSizeBytes: "104867840"
  statsProviderClass: org.apache.bookkeeper.stats.prometheus.PrometheusMetricsProvider
---
# Source: milvus/charts/pulsar/templates/broker-deployment/broker-configmap.yaml
#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
apiVersion: v1
kind: ConfigMap
metadata:
  name: "sfe-milvus-pulsar-broker"
  namespace: default
  labels:
    app: pulsar
    chart: pulsar-1.0.31
    release: sfe-milvus
    heritage: Helm
    component: broker
    cluster: sfe-milvus-pulsar
data:
  zookeeperServers:
    sfe-milvus-pulsar-zookeeper-ca:2181
  configurationStoreServers:
    sfe-milvus-pulsar-zookeeper-ca:2181
  clusterName: sfe-milvus-pulsar
  allowAutoTopicCreationType: "non-partitioned"
  PULSAR_EXTRA_OPTS: -Dpulsar.log.root.level=info
  PULSAR_GC: '"-XX:+UseG1GC"'
  PULSAR_LOG_LEVEL: info
  PULSAR_LOG_ROOT_LEVEL: info
  PULSAR_MEM: '"-Xms4096m -Xmx4096m -XX:MaxDirectMemorySize=8192m -Dio.netty.leakDetectionLevel=disabled
    -Dio.netty.recycler.linkCapacity=1024 -XX:+ParallelRefProcEnabled -XX:+UnlockExperimentalVMOptions
    -XX:+AggressiveOpts -XX:+DoEscapeAnalysis -XX:ParallelGCThreads=32 -XX:ConcGCThreads=32
    -XX:G1NewSizePercent=50 -XX:+DisableExplicitGC -XX:-ResizePLAB -XX:+ExitOnOutOfMemoryError
    -XX:+PerfDisableSharedMem"'
  backlogQuotaDefaultLimitGB: "8"
  backlogQuotaDefaultRetentionPolicy: producer_exception
  brokerDeduplicationEnabled: "false"
  defaultRetentionSizeInMB: "8192"
  defaultRetentionTimeInMinutes: "10080"
  exposeConsumerLevelMetricsInPrometheus: "true"
  exposeTopicLevelMetricsInPrometheus: "true"
  maxMessageSize: "104857600"
---
# Source: milvus/charts/pulsar/templates/health-configmap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: "sfe-milvus-pulsar-health"
  labels:
    app: pulsar
    chart: pulsar-1.0.31
    release: sfe-milvus
    heritage: Helm
    component: "health-check"
    cluster: sfe-milvus-pulsar
data:
  proxy_health_check.sh: |
    #!/bin/bash
    curl -s --connect-timeout 2 --fail http://localhost:8080/metrics/ > /dev/null

  broker_health_check.sh: |
    #!/bin/bash
    curl -s --connect-timeout 2 --fail http://localhost:8080/admin/v2/brokers/health
---
# Source: milvus/charts/pulsar/templates/proxy-configmap.yaml
#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
apiVersion: v1
kind: ConfigMap
metadata:
  name: "sfe-milvus-pulsar-proxy"
  namespace: default
  labels:
    app: pulsar
    chart: pulsar-1.0.31
    release: sfe-milvus
    heritage: Helm
    component: proxy
    cluster: sfe-milvus-pulsar
data:
  brokerServiceURL: "pulsar://sfe-milvus-pulsar-broker:6650"
  brokerServiceURLTLS: "pulsar+ssl://sfe-milvus-pulsar-broker:6651"
  brokerWebServiceURL: "http://sfe-milvus-pulsar-broker:8080"
  brokerWebServiceURLTLS: "https://sfe-milvus-pulsar-broker:8443"
  zookeeperServers:
    sfe-milvus-pulsar-zookeeper-ca:2181
  configurationStoreServers:
    sfe-milvus-pulsar-zookeeper-ca:2181
  PULSAR_EXTRA_OPTS: -Dpulsar.log.root.level=info
  PULSAR_LOG_LEVEL: info
  PULSAR_LOG_ROOT_LEVEL: info
  PULSAR_MEM: '"-Xms2048m -Xmx2048m -XX:MaxDirectMemorySize=2048m"'
  numHttpServerThreads: "10"
---
# Source: milvus/charts/pulsar/templates/proxy-ws-configmap.yaml
#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
apiVersion: v1
kind: ConfigMap
metadata:
  name: "sfe-milvus-pulsar-proxy-ws"
  namespace: default
  labels:
    app: pulsar
    chart: pulsar-1.0.31
    release: sfe-milvus
    heritage: Helm
    component: proxy
    cluster: sfe-milvus-pulsar
data:
  brokerServiceUrl: "pulsar://sfe-milvus-pulsar-broker:6650"
  brokerServiceUrlTls: "pulsar+ssl://sfe-milvus-pulsar-broker:6651"
  serviceUrl: "http://sfe-milvus-pulsar-broker:8080"
  serviceUrlTls: "https://sfe-milvus-pulsar-broker:8443"
  zookeeperServers:
    "sfe-milvus-pulsar-zookeeper-ca:2181"
  configurationStoreServers:
    "sfe-milvus-pulsar-zookeeper-ca:2181"
  clusterName: sfe-milvus-pulsar
  webServicePort: "8000"
  PULSAR_EXTRA_OPTS: -Dpulsar.log.root.level=info
  PULSAR_LOG_LEVEL: info
  PULSAR_LOG_ROOT_LEVEL: info
  PULSAR_MEM: '"-Xms2048m -Xmx2048m -XX:MaxDirectMemorySize=2048m"'
  numHttpServerThreads: "10"
---
# Source: milvus/charts/pulsar/templates/zookeeper/zookeeper-configmap.yaml
#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#

apiVersion: v1
kind: ConfigMap
metadata:
  name: "sfe-milvus-pulsar-zookeeper"
  namespace: default
  labels:
    app: pulsar
    chart: pulsar-1.0.31
    release: sfe-milvus
    heritage: Helm
    component: zookeeper
    cluster: sfe-milvus-pulsar
data:
  PULSAR_PREFIX_quorumListenOnAllIPs: "true"
  PULSAR_EXTRA_OPTS: -Dpulsar.log.root.level=info
  PULSAR_GC: '"-XX:+UseG1GC"'
  PULSAR_LOG_LEVEL: info
  PULSAR_LOG_ROOT_LEVEL: info
  PULSAR_MEM: '"-Xms1024m -Xmx1024m -Dcom.sun.management.jmxremote -Djute.maxbuffer=10485760
    -XX:+DoEscapeAnalysis -XX:+DisableExplicitGC -XX:+PerfDisableSharedMem -Dzookeeper.forceSync=no"'
---
# Source: milvus/templates/configmap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: sfe-milvus
data:
  milvus.yaml: |
    # Copyright (C) 2019-2021 Zilliz. All rights reserved.
    #
    # Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance
    # with the License. You may obtain a copy of the License at
    #
    # http://www.apache.org/licenses/LICENSE-2.0
    #
    # Unless required by applicable law or agreed to in writing, software distributed under the License
    # is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
    # or implied. See the License for the specific language governing permissions and limitations under the License.
    
    etcd:
      endpoints:
        - sfe-milvus-etcd:2379
      rootPath: by-dev
      metaSubPath: meta # metaRootPath = rootPath + '/' + metaSubPath
      kvSubPath: kv # kvRootPath = rootPath + '/' + kvSubPath
    
    minio:
      address: http://chang
      port: 1990
      accessKeyID: chang
      secretAccessKey: chang
      useSSL: false
      bucketName: chang
      rootPath: 
    
    pulsar:
      address: sfe-milvus-pulsar-proxy
      port: 6650
    
    rocksmq:
      path: "/var/lib/milvus/rdb_data"
      rocksmqPageSize: "2147483648"  # 2 GB
      retentionTimeInMinutes: 10080
      retentionSizeInMB: 8192
    
    rootCoord:
      address: sfe-milvus-rootcoord
      port: 53100
    
      grpc:
        serverMaxRecvSize: 2147483647  # math.MaxInt32
        serverMaxSendSize: 2147483647  # math.MaxInt32
        clientMaxRecvSize: 104857600   # 100 MB, 100 * 1024 * 1024
        clientMaxSendSize: 104857600   # 100 MB, 100 * 1024 * 1024
    
      dmlChannelNum: "256"  # The number of dml channels created at system startup
      maxPartitionNum: "4096"  # Maximum number of partitions in a collection
      minSegmentSizeToEnableIndex: "1024"  # It's a threshold. When the segment size is less than this value, the segment will not be indexed
      timeout: 3600  # time out, 5 seconds
      timeTickInterval: 200  # ms, the interval that proxy synchronize the time tick
    
    proxy:
      port: 19530
    
      grpc:
        serverMaxRecvSize: 2147483647  # math.MaxInt32
        serverMaxSendSize: 2147483647  # math.MaxInt32
        clientMaxRecvSize: 104857600   # 100 MB, 100 * 1024 * 1024
        clientMaxSendSize: 104857600   # 100 MB, 100 * 1024 * 1024
    
      timeTickInterval: "200"  # ms, the interval that proxy synchronize the time tick
      msgStream:
        insert:
          bufSize: 1024  # msgPack chan buffer size
        search:
          bufSize: 512
        searchResult:
          recvBufSize: 1024  # msgPack chan buffer size
          pulsarBufSize: 1024  # pulsar chan buffer size
        timeTick:
          bufSize: 512
      maxNameLength: 255   # max name length of collection or alias
      maxFieldNum: "256"     # max field number of a collection
      maxDimension: 32768  # Maximum dimension of vector
      maxShardNum: "256"  # Maximum number of shards in a collection
      maxTaskNum: "1024"  # max task number of proxy task queue
    
    queryCoord:
      address: sfe-milvus-querycoord
      port: 19531
      autoHandoff: true
      autoBalance: true
      overloadedMemoryThresholdPercentage: 90
      balanceIntervalSeconds: 60
      memoryUsageMaxDifferencePercentage: 30
    
      grpc:
        serverMaxRecvSize: 2147483647  # math.MaxInt32
        serverMaxSendSize: 2147483647  # math.MaxInt32
        clientMaxRecvSize: 104857600   # 100 MB, 100 * 1024 * 1024
        clientMaxSendSize: 104857600   # 100 MB, 100 * 1024 * 1024
    
    queryNode:
      gracefulTime: 0  # ms
      port: 21123
    
      grpc:
        serverMaxRecvSize: 2147483647  # math.MaxInt32
        serverMaxSendSize: 2147483647  # math.MaxInt32
        clientMaxRecvSize: 104857600   # 100 MB, 100 * 1024 * 1024
        clientMaxSendSize: 104857600   # 100 MB, 100 * 1024 * 1024
    
      stats:
        publishInterval: 1000  # Interval for querynode to report node information (milliseconds)
      dataSync:
        flowGraph:
          maxQueueLength: 1024  # Maximum length of task queue in flowgraph
          maxParallelism: 1024  # Maximum number of tasks executed in parallel in the flowgraph
      msgStream:
        search:
          recvBufSize: 512    # msgPack channel buffer size
          pulsarBufSize: 512  # pulsar channel buffer size
        searchResult:
          recvBufSize: 64  # msgPack channel buffer size
      segcore:
        chunkRows: 32768  # The number of vectors in a chunk.
    
    indexCoord:
      address: sfe-milvus-indexcoord
      port: 31000
    
      grpc:
        serverMaxRecvSize: 2147483647  # math.MaxInt32
        serverMaxSendSize: 2147483647  # math.MaxInt32
        clientMaxRecvSize: 104857600   # 100 MB, 100 * 1024 * 1024
        clientMaxSendSize: 104857600   # 100 MB, 100 * 1024 * 1024
    
    indexNode:
      port: 21121
    
      grpc:
        serverMaxRecvSize: 2147483647  # math.MaxInt32
        serverMaxSendSize: 2147483647  # math.MaxInt32
        clientMaxRecvSize: 104857600   # 100 MB, 100 * 1024 * 1024
        clientMaxSendSize: 104857600   # 100 MB, 100 * 1024 * 1024
    
    dataCoord:
      address: sfe-milvus-datacoord
      port: 13333
    
      grpc:
        serverMaxRecvSize: 2147483647  # math.MaxInt32
        serverMaxSendSize: 2147483647  # math.MaxInt32
        clientMaxRecvSize: 104857600   # 100 MB, 100 * 1024 * 1024
        clientMaxSendSize: 104857600   # 100 MB, 100 * 1024 * 1024
      enableCompaction: true
      enableGarbageCollection: true
    
      segment:
        maxSize: "512"  # Maximum size of a segment in MB
        sealProportion: 0.75  # It's the minimum proportion for a segment which can be sealed
        assignmentExpiration: 2000  # ms
    
      compaction:
        enableAutoCompaction: true
        retentionDuration: 432000
    
      gc:
        interval: 60 # gc interval in seconds
        missingTolerance: 3600 # file meta missing tolerance duration in seconds, 1 day
        dropTolerance: 3600 # file belongs to dropped entity tolerance duration in seconds, 1 day
    
    dataNode:
      port: 21124
    
      grpc:
        serverMaxRecvSize: 2147483647  # math.MaxInt32
        serverMaxSendSize: 2147483647  # math.MaxInt32
        clientMaxRecvSize: 104857600   # 100 MB, 100 * 1024 * 1024
        clientMaxSendSize: 104857600   # 100 MB, 100 * 1024 * 1024
    
      dataSync:
        flowGraph:
          maxQueueLength: 1024  # Maximum length of task queue in flowgraph
          maxParallelism: 1024  # Maximum number of tasks executed in parallel in the flowgraph
      flush:
        insertBufSize: "16777216"  # Bytes, 16 MB
    
    log:
      level: debug
      file:
        rootPath: ""
        maxSize: 300
        maxAge: 10
        maxBackups: 20
      format: text
    
    msgChannel:
      # channel name generation rule: ${namePrefix}-${ChannelIdx}
      chanNamePrefix:
        cluster: by-dev
        rootCoordTimeTick: "rootcoord-timetick"
        rootCoordStatistics: "rootcoord-statistics"
        rootCoordDml: "rootcoord-dml"
        rootCoordDelta: "rootcoord-delta"
        search: "search"
        searchResult: "searchResult"
        proxyTimeTick: "proxyTimeTick"
        queryTimeTick: "queryTimeTick"
        queryNodeStats: "query-node-stats"
        cmd: "cmd"
        dataCoordInsertChannel: "insert-channel-"
        dataCoordStatistic: "datacoord-statistics-channel"
        dataCoordTimeTick: "datacoord-timetick-channel"
        dataCoordSegmentInfo: "segment-info-channel"
    
      # sub name generation rule: ${subNamePrefix}-${NodeID}
      subNamePrefix:
        rootCoordSubNamePrefix: "rootCoord"
        proxySubNamePrefix: "proxy"
        queryNodeSubNamePrefix: "queryNode"
        dataNodeSubNamePrefix: "dataNode"
        dataCoordSubNamePrefix: "dataCoord"
    
    common:
      defaultPartitionName: "_default"  # default partition name for a collection
      defaultIndexName: "_default_idx"  # default index name
    
    knowhere:
      simdType: auto  # default to auto
---
# Source: milvus/charts/etcd/templates/svc-headless.yaml
apiVersion: v1
kind: Service
metadata:
  name: sfe-milvus-etcd-headless
  namespace: default
  labels:
    app.kubernetes.io/name: etcd
    helm.sh/chart: etcd-6.3.3
    app.kubernetes.io/instance: sfe-milvus
    app.kubernetes.io/managed-by: Helm
  annotations:
    service.alpha.kubernetes.io/tolerate-unready-endpoints: "true"
spec:
  type: ClusterIP
  clusterIP: None
  publishNotReadyAddresses: true
  ports:
    - name: "client"
      port: 2379
      targetPort: client
    - name: "peer"
      port: 2380
      targetPort: peer
  selector:
    app.kubernetes.io/name: etcd
    app.kubernetes.io/instance: sfe-milvus
---
# Source: milvus/charts/etcd/templates/svc.yaml
apiVersion: v1
kind: Service
metadata:
  name: sfe-milvus-etcd
  namespace: default
  labels:
    app.kubernetes.io/name: etcd
    helm.sh/chart: etcd-6.3.3
    app.kubernetes.io/instance: sfe-milvus
    app.kubernetes.io/managed-by: Helm
  annotations:
spec:
  type: ClusterIP
  ports:
    - name: "client"
      port: 2379
      targetPort: client
      nodePort: null
    - name: "peer"
      port: 2380
      targetPort: peer
      nodePort: null
  selector:
    app.kubernetes.io/name: etcd
    app.kubernetes.io/instance: sfe-milvus
---
# Source: milvus/charts/pulsar/templates/bookkeeper-service.yaml
#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#

apiVersion: v1
kind: Service
metadata:
  name: "sfe-milvus-pulsar-bookkeeper"
  namespace: default
  labels:
    app: pulsar
    chart: pulsar-1.0.31
    release: sfe-milvus
    heritage: Helm
    component: bookkeeper
    cluster: sfe-milvus-pulsar
  annotations:
    publishNotReadyAddresses: "true"
    service.alpha.kubernetes.io/tolerate-unready-endpoints: "true"
spec:
  ports:
  - name: server
    port: 3181
  clusterIP: None
  selector:
    app: pulsar
    release: sfe-milvus
    component: bookkeeper
---
# Source: milvus/charts/pulsar/templates/broker-deployment/broker-service.yaml
#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
apiVersion: v1
kind: Service
metadata:
  name: "sfe-milvus-pulsar-broker"
  namespace: default
  labels:
    app: pulsar
    chart: pulsar-1.0.31
    release: sfe-milvus
    heritage: Helm
    component: broker
    cluster: sfe-milvus-pulsar
  annotations:
spec:
  ports:
  - name: http
    port: 8080
  - name: pulsar
    port: 6650
  - name: https
    port: 8443
  - name: pulsarssl
    port: 6651
  type: ClusterIP
  selector:
    app: pulsar
    release: sfe-milvus
    component: broker
---
# Source: milvus/charts/pulsar/templates/proxy-service.yaml
#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
apiVersion: v1
kind: Service
metadata:
  name: "sfe-milvus-pulsar-proxy"
  namespace: default
  labels:
    app: pulsar
    chart: pulsar-1.0.31
    release: sfe-milvus
    heritage: Helm
    component: proxy
    cluster: sfe-milvus-pulsar
  annotations:
    external-dns.alpha.kubernetes.io/hostname: pulsar.example.com
spec:
  type: ClusterIP
  ports:
  - name: http
    port: 8080
    protocol: TCP
  - name: pulsar
    port: 6650
    protocol: TCP
  - name: ws
    port: 8000
    protocol: TCP
  selector:
    app: pulsar
    release: sfe-milvus
    component: proxy
---
# Source: milvus/charts/pulsar/templates/zookeeper/zookeeper-service.yaml
#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#

apiVersion: v1
kind: Service
metadata:
  name: "sfe-milvus-pulsar-zookeeper"
  namespace: default
  labels:
    app: pulsar
    chart: pulsar-1.0.31
    release: sfe-milvus
    heritage: Helm
    component: zookeeper
    cluster: sfe-milvus-pulsar
  annotations:
    publishNotReadyAddresses: "true"
    service.alpha.kubernetes.io/tolerate-unready-endpoints: "true"
spec:
  ports:
  - name: server
    port: 2888
  - name: leader-election
    port: 3888
  - name: client
    port: 2181
  clusterIP: None
  selector:
    app: pulsar
    release: sfe-milvus
    component: zookeeper
---
# Source: milvus/charts/pulsar/templates/zookeeper/zookeeper-service.yaml
apiVersion: v1
kind: Service
metadata:
  name: "sfe-milvus-pulsar-zookeeper-ca"
  namespace: default
  labels:
    app: pulsar
    chart: pulsar-1.0.31
    release: sfe-milvus
    heritage: Helm
    component: zookeeper
    cluster: sfe-milvus-pulsar
  annotations:
spec:
  ports:
  - name: server
    port: 2888
  - name: leader-election
    port: 3888
  - name: client
    port: 2181
  selector:
    app: pulsar
    release: sfe-milvus
    component: zookeeper
---
# Source: milvus/templates/datacoord-svc.yaml
apiVersion: v1
kind: Service
metadata:
  name: sfe-milvus-datacoord
  labels:
    helm.sh/chart: milvus-3.0.5
    app.kubernetes.io/name: milvus
    app.kubernetes.io/instance: sfe-milvus
    app.kubernetes.io/version: "2.0.0"
    app.kubernetes.io/managed-by: Helm
    component: "datacoord"
spec:
  type: ClusterIP
  ports:
    - name: datacoord
      port: 13333
      protocol: TCP
      targetPort: datacoord
    - name: metrics
      protocol: TCP
      port: 9091
      targetPort: metrics
  selector:
    app.kubernetes.io/name: milvus
    app.kubernetes.io/instance: sfe-milvus
    component: "datacoord"
---
# Source: milvus/templates/datanode-svc.yaml
apiVersion: v1
kind: Service
metadata:
  name: sfe-milvus-datanode
  labels:
    helm.sh/chart: milvus-3.0.5
    app.kubernetes.io/name: milvus
    app.kubernetes.io/instance: sfe-milvus
    app.kubernetes.io/version: "2.0.0"
    app.kubernetes.io/managed-by: Helm
    component: "datanode"
spec:
  type: ClusterIP
  clusterIP: None
  ports:
    - name: metrics
      protocol: TCP
      port: 9091
      targetPort: metrics
  selector:
    app.kubernetes.io/name: milvus
    app.kubernetes.io/instance: sfe-milvus
    component: "datanode"
---
# Source: milvus/templates/indexcoord-svc.yaml
apiVersion: v1
kind: Service
metadata:
  name: sfe-milvus-indexcoord
  labels:
    helm.sh/chart: milvus-3.0.5
    app.kubernetes.io/name: milvus
    app.kubernetes.io/instance: sfe-milvus
    app.kubernetes.io/version: "2.0.0"
    app.kubernetes.io/managed-by: Helm
    component: "indexcoord"
spec:
  type: ClusterIP
  ports:
    - name: indexcoord
      port: 31000
      protocol: TCP
      targetPort: indexcoord
    - name: metrics
      protocol: TCP
      port: 9091
      targetPort: metrics
  selector:
    app.kubernetes.io/name: milvus
    app.kubernetes.io/instance: sfe-milvus
    component: "indexcoord"
---
# Source: milvus/templates/indexnode-svc.yaml
apiVersion: v1
kind: Service
metadata:
  name: sfe-milvus-indexnode
  labels:
    helm.sh/chart: milvus-3.0.5
    app.kubernetes.io/name: milvus
    app.kubernetes.io/instance: sfe-milvus
    app.kubernetes.io/version: "2.0.0"
    app.kubernetes.io/managed-by: Helm
    component: "indexnode"
spec:
  type: ClusterIP
  clusterIP: None
  ports:
    - name: metrics
      protocol: TCP
      port: 9091
      targetPort: metrics
  selector:
    app.kubernetes.io/name: milvus
    app.kubernetes.io/instance: sfe-milvus
    component: "indexnode"
---
# Source: milvus/templates/querycoord-svc.yaml
apiVersion: v1
kind: Service
metadata:
  name: sfe-milvus-querycoord
  labels:
    helm.sh/chart: milvus-3.0.5
    app.kubernetes.io/name: milvus
    app.kubernetes.io/instance: sfe-milvus
    app.kubernetes.io/version: "2.0.0"
    app.kubernetes.io/managed-by: Helm
    component: "querycoord"
spec:
  type: ClusterIP
  ports:
    - name: querycoord
      port: 19531
      protocol: TCP
      targetPort: querycoord
    - name: metrics
      protocol: TCP
      port: 9091
      targetPort: metrics
  selector:
    app.kubernetes.io/name: milvus
    app.kubernetes.io/instance: sfe-milvus
    component: "querycoord"
---
# Source: milvus/templates/querynode-svc.yaml
apiVersion: v1
kind: Service
metadata:
  name: sfe-milvus-querynode
  labels:
    helm.sh/chart: milvus-3.0.5
    app.kubernetes.io/name: milvus
    app.kubernetes.io/instance: sfe-milvus
    app.kubernetes.io/version: "2.0.0"
    app.kubernetes.io/managed-by: Helm
    component: "querynode"
spec:
  type: ClusterIP
  clusterIP: None
  ports:
    - name: metrics
      protocol: TCP
      port: 9091
      targetPort: metrics
  selector:
    app.kubernetes.io/name: milvus
    app.kubernetes.io/instance: sfe-milvus
    component: "querynode"
---
# Source: milvus/templates/rootcoord-svc.yaml
apiVersion: v1
kind: Service
metadata:
  name: sfe-milvus-rootcoord
  labels:
    helm.sh/chart: milvus-3.0.5
    app.kubernetes.io/name: milvus
    app.kubernetes.io/instance: sfe-milvus
    app.kubernetes.io/version: "2.0.0"
    app.kubernetes.io/managed-by: Helm
    component: "rootcoord"
spec:
  type: ClusterIP
  ports:
    - name: rootcoord
      port: 53100
      protocol: TCP
      targetPort: rootcoord
    - name: metrics
      protocol: TCP
      port: 9091
      targetPort: metrics
  selector:
    app.kubernetes.io/name: milvus
    app.kubernetes.io/instance: sfe-milvus
    component: "rootcoord"
---
# Source: milvus/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: sfe-milvus
  labels:
    helm.sh/chart: milvus-3.0.5
    app.kubernetes.io/name: milvus
    app.kubernetes.io/instance: sfe-milvus
    app.kubernetes.io/version: "2.0.0"
    app.kubernetes.io/managed-by: Helm
    component: "proxy"
spec:
  type: ClusterIP
  ports:
    - name: milvus
      port: 19530
      protocol: TCP
      targetPort: milvus
    - name: metrics
      protocol: TCP
      port: 9091
      targetPort: metrics
  selector:
    app.kubernetes.io/name: milvus
    app.kubernetes.io/instance: sfe-milvus
    component: "proxy"
---
# Source: milvus/charts/pulsar/templates/autorecovery-deployment.yaml
#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
apiVersion: apps/v1
kind: Deployment
metadata:
  name: "sfe-milvus-pulsar-autorecovery"
  namespace: default
  labels:
    app: pulsar
    chart: pulsar-1.0.31
    release: sfe-milvus
    heritage: Helm
    component: autorecovery
    cluster: sfe-milvus-pulsar
spec:
  replicas: 1
  selector:
    matchLabels:
      app: pulsar
      release: sfe-milvus
      component: autorecovery
  template:
    metadata:
      labels:
        app: pulsar
        release: sfe-milvus
        component: autorecovery
        cluster: sfe-milvus-pulsar
      annotations:
        {}
    spec:
      affinity:
      terminationGracePeriodSeconds: 60
      initContainers:
      # This init container will wait for zookeeper to be ready before
      # deploying the bookies
      - name: wait-zookeeper-ready
        image: "apachepulsar/pulsar:2.8.2"
        imagePullPolicy: IfNotPresent
        command: ["sh", "-c"]
        args:
          - >-
            until bin/pulsar zookeeper-shell -server sfe-milvus-pulsar-zookeeper ls /admin/clusters | grep "^\[.*sfe-milvus-pulsar.*\]"; do
              sleep 3;
            done;
      volumes:
      containers:
      - name: "sfe-milvus-pulsar-autorecovery"
        image: "apachepulsar/pulsar:2.8.2"
        imagePullPolicy: IfNotPresent
        resources:
          requests:
            cpu: 1
            memory: 512Mi
        command: ["sh", "-c"]
        args:
        - >
          bin/apply-config-from-env.py conf/bookkeeper.conf &&
          bin/apply-config-from-env.py conf/bkenv.sh &&
          exec bin/bookkeeper autorecovery
        envFrom:
        - configMapRef:
            name: "sfe-milvus-pulsar-autorecovery"
---
# Source: milvus/charts/pulsar/templates/bastion-deployment.yaml
#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
apiVersion: apps/v1
kind: Deployment
metadata:
  name: "sfe-milvus-pulsar-bastion"
  namespace: default
  labels:
    app: pulsar
    chart: pulsar-1.0.31
    release: sfe-milvus
    heritage: Helm
    component: bastion
    cluster: sfe-milvus-pulsar
spec:
  replicas: 1
  selector:
    matchLabels:
      app: pulsar
      release: sfe-milvus
      component: bastion
  template:
    metadata:
      labels:
        app: pulsar
        release: sfe-milvus
        component: bastion
        cluster: sfe-milvus-pulsar
      annotations:
        {}
    spec:
      terminationGracePeriodSeconds: 60
      volumes:
      containers:
      - name: "sfe-milvus-pulsar-bastion"
        image: "apachepulsar/pulsar:2.8.2"
        imagePullPolicy: IfNotPresent
        resources:
          requests:
            cpu: 0.25
            memory: 256Mi
        command: ["sh", "-c"]
        volumeMounts:
        args:
        - >
          bin/apply-config-from-env.py conf/client.conf &&
          exec /bin/bash -c "trap : TERM INT; sleep infinity & wait"
        envFrom:
        - configMapRef:
            name: "sfe-milvus-pulsar-bastion"
        env:
        # If proxy is deployed, us that for web service URL to 
        # properly forward command to broker or function worker
        - name: webServiceUrl
          value: http://sfe-milvus-pulsar-proxy:8080/
        - name: brokerServiceUrl
          value: pulsar://sfe-milvus-pulsar-broker:6650/
---
# Source: milvus/charts/pulsar/templates/broker-deployment/broker-deployment.yaml
#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
apiVersion: apps/v1
kind: Deployment
metadata:
  name: "sfe-milvus-pulsar-broker"
  namespace: default
  labels:
    app: pulsar
    chart: pulsar-1.0.31
    release: sfe-milvus
    heritage: Helm
    component: broker
    cluster: sfe-milvus-pulsar
spec:
  replicas: 1
  selector:
    matchLabels:
      app: pulsar
      release: sfe-milvus
      component: broker
  strategy:
    rollingUpdate:
      maxSurge: 1
      maxUnavailable: 0
    type: RollingUpdate
  template:
    metadata:
      labels:
        app: pulsar
        release: sfe-milvus
        component: broker
        cluster: sfe-milvus-pulsar
      annotations:
        prometheus.io/port: "8080"
        prometheus.io/scrape: "true"
    spec:
      affinity:
      terminationGracePeriodSeconds: 60
      volumes:
        - name: health
          configMap: 
            name: "sfe-milvus-pulsar-health"
            defaultMode: 0755
      initContainers:
      # This init container will wait for bookkeeper to be ready before
      # deploying the broker
      - name: wait-bookkeeper-ready
        image: "apachepulsar/pulsar:2.8.2"
        imagePullPolicy: IfNotPresent
        command: ["sh", "-c"]
        args:
          - >-
            until nslookup sfe-milvus-pulsar-bookkeeper-2.sfe-milvus-pulsar-bookkeeper.default; do
              sleep 3;
            done;
      containers:
      - name: "sfe-milvus-pulsar-broker"
        image: "apachepulsar/pulsar:2.8.2"
        imagePullPolicy: IfNotPresent
        readinessProbe:
          exec:
            command:
            - "/pulsar/health/broker_health_check.sh"
          initialDelaySeconds: 10 
          periodSeconds:  30 
        livenessProbe:
          exec:
            command:
            - "/pulsar/health/broker_health_check.sh"
          initialDelaySeconds: 10 
          periodSeconds: 30
        resources:
          requests:
            cpu: 1.5
            memory: 4096Mi
        command: ["sh", "-c"]
        args:
        - >
          bin/apply-config-from-env.py conf/broker.conf &&
          bin/apply-config-from-env.py conf/pulsar_env.sh &&
          bin/apply-config-from-env.py conf/client.conf &&
          bin/gen-yml-from-env.py conf/functions_worker.yml &&
          exec bin/pulsar broker
        ports:
        - name: http
          containerPort: 8080
        - name: pulsar
          containerPort: 6650
        volumeMounts:
          - name: health
            mountPath: /pulsar/health
        envFrom:
        - configMapRef:
            name: "sfe-milvus-pulsar-broker"
        env:
        - name: advertisedAddress
          valueFrom:
            fieldRef:
              fieldPath: status.podIP
---
# Source: milvus/charts/pulsar/templates/proxy-deployment.yaml
#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
apiVersion: apps/v1
kind: Deployment
metadata:
  name: "sfe-milvus-pulsar-proxy"
  namespace: default
  labels:
    app: pulsar
    chart: pulsar-1.0.31
    release: sfe-milvus
    heritage: Helm
    component: proxy
    cluster: sfe-milvus-pulsar
spec:
  replicas: 1
  selector:
    matchLabels:
      app: pulsar
      release: sfe-milvus
      component: proxy
  strategy:
    rollingUpdate:
      maxSurge: 1
      maxUnavailable: 0
    type: RollingUpdate
  template:
    metadata:
      labels:
        app: pulsar
        release: sfe-milvus
        component: proxy
        cluster: sfe-milvus-pulsar
      annotations:
        prometheus.io/port: "8080"
        prometheus.io/scrape: "true"
    spec:
      affinity:
      terminationGracePeriodSeconds: 60
      volumes:
        - name: health
          configMap: 
            name: "sfe-milvus-pulsar-health"
            defaultMode: 0755
      initContainers:
      # This init container will wait for bookkeeper to be ready before
      # deploying the booproxykies
      - name: wait-bookkeeper-ready
        image: "apachepulsar/pulsar:2.8.2"
        imagePullPolicy: IfNotPresent
        command: ["sh", "-c"]
        args:
          - >-
            until nslookup sfe-milvus-pulsar-bookkeeper-2.sfe-milvus-pulsar-bookkeeper.default; do
              sleep 3;
            done;
      containers:
      - name: "sfe-milvus-pulsar-proxy"
        image: "apachepulsar/pulsar:2.8.2"
        imagePullPolicy: IfNotPresent
        readinessProbe:
          exec:
            command:
            - "/pulsar/health/proxy_health_check.sh"
          initialDelaySeconds: 10 
          periodSeconds:  30 
        livenessProbe:
          exec:
            command:
            - "/pulsar/health/proxy_health_check.sh"
          initialDelaySeconds: 10 
          periodSeconds: 30
        resources:
          requests:
            cpu: 1
            memory: 2048Mi
        command: ["sh", "-c"]
        args:
        - >
          bin/apply-config-from-env.py conf/proxy.conf &&
          bin/apply-config-from-env.py conf/pulsar_env.sh &&
          exec bin/pulsar proxy
        ports:
        - name: wss
          containerPort: 8001
        volumeMounts:
          - name: health
            mountPath: /pulsar/health
        envFrom:
        - configMapRef:
            name: "sfe-milvus-pulsar-proxy"
      - name: "sfe-milvus-pulsar-proxy-ws"
        image: "apachepulsar/pulsar:2.8.2"
        imagePullPolicy: IfNotPresent
        resources:
          requests:
            cpu: 0.3
            memory: 512Mi
        command: ["sh", "-c"]
        args:
        - >
          bin/apply-config-from-env.py conf/websocket.conf &&
          bin/apply-config-from-env.py conf/pulsar_env.sh &&
          bin/pulsar websocket
        ports:
        - name: http
          containerPort: 8080
        envFrom:
        - configMapRef:
            name: "sfe-milvus-pulsar-proxy-ws"
---
# Source: milvus/templates/datacoord-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: sfe-milvus-datacoord
  labels:
    helm.sh/chart: milvus-3.0.5
    app.kubernetes.io/name: milvus
    app.kubernetes.io/instance: sfe-milvus
    app.kubernetes.io/version: "2.0.0"
    app.kubernetes.io/managed-by: Helm
    component: "datacoord"
    
  annotations:
    

spec:
  replicas: 1
  strategy:
    type: Recreate
  selector:
    matchLabels:
      app.kubernetes.io/name: milvus
      app.kubernetes.io/instance: sfe-milvus
      component: "datacoord"
  template:
    metadata:
      labels:
        app.kubernetes.io/name: milvus
        app.kubernetes.io/instance: sfe-milvus
        component: "datacoord"
        
      annotations:
        checksum/config: 458a4230e55ba760cae507f3021c0cb3a591916782168da818983b549606eaa0
        
    spec:
      containers:
      - name: datacoord
        image: "milvusdb/milvus:v2.0.0"
        imagePullPolicy: IfNotPresent
        args: [ "milvus", "run", "datacoord" ]
        env:
        - name: CACHE_SIZE
          valueFrom:
            resourceFieldRef:
              divisor: 1Gi
              resource: limits.memory
        - name: GODEBUG
          value: madvdontneed=1
        ports:
          - name: datacoord
            containerPort: 13333
            protocol: TCP
          - name: metrics
            containerPort: 9091
            protocol: TCP
        livenessProbe:
          httpGet:
            path: /healthz
            port: metrics
          initialDelaySeconds: 90
          periodSeconds: 30
          timeoutSeconds: 5
          successThreshold: 1
          failureThreshold: 5
        readinessProbe:
          httpGet:
            path: /healthz
            port: metrics
          initialDelaySeconds: 90
          periodSeconds: 10
          timeoutSeconds: 5
          successThreshold: 1
          failureThreshold: 5
        resources:
          {}
        volumeMounts:
        - name: milvus-config
          mountPath: /milvus/configs/milvus.yaml
          subPath: milvus.yaml
          readOnly: true

      volumes:
      - name: milvus-config
        configMap:
          name: sfe-milvus
---
# Source: milvus/templates/datanode-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: sfe-milvus-datanode
  labels:
    helm.sh/chart: milvus-3.0.5
    app.kubernetes.io/name: milvus
    app.kubernetes.io/instance: sfe-milvus
    app.kubernetes.io/version: "2.0.0"
    app.kubernetes.io/managed-by: Helm
    component: "datanode"

    
  annotations:
    

spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: milvus
      app.kubernetes.io/instance: sfe-milvus
      component: "datanode"
  template:
    metadata:
      labels:
        app.kubernetes.io/name: milvus
        app.kubernetes.io/instance: sfe-milvus
        component: "datanode"
        
      annotations:
        checksum/config: 458a4230e55ba760cae507f3021c0cb3a591916782168da818983b549606eaa0
        
    spec:
      containers:
      - name: datanode
        image: "milvusdb/milvus:v2.0.0"
        imagePullPolicy: IfNotPresent
        args: [ "milvus", "run", "datanode" ]
        env:
        - name: CACHE_SIZE
          valueFrom:
            resourceFieldRef:
              divisor: 1Gi
              resource: limits.memory
        - name: GODEBUG
          value: madvdontneed=1
        ports:
          - name: datanode
            containerPort: 21124
            protocol: TCP
          - name: metrics
            containerPort: 9091
            protocol: TCP
        livenessProbe:
          httpGet:
            path: /healthz
            port: metrics
          initialDelaySeconds: 90
          periodSeconds: 30
          timeoutSeconds: 5
          successThreshold: 1
          failureThreshold: 5
        readinessProbe:
          httpGet:
            path: /healthz
            port: metrics
          initialDelaySeconds: 90
          periodSeconds: 10
          timeoutSeconds: 5
          successThreshold: 1
          failureThreshold: 5
        resources:
          {}
        volumeMounts:
        - name: milvus-config
          mountPath: /milvus/configs/milvus.yaml
          subPath: milvus.yaml
          readOnly: true

      volumes:
      - name: milvus-config
        configMap:
          name: sfe-milvus
---
# Source: milvus/templates/indexcoord-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: sfe-milvus-indexcoord
  labels:
    helm.sh/chart: milvus-3.0.5
    app.kubernetes.io/name: milvus
    app.kubernetes.io/instance: sfe-milvus
    app.kubernetes.io/version: "2.0.0"
    app.kubernetes.io/managed-by: Helm
    component: "indexcoord"
    
  annotations:
    

spec:
  replicas: 1
  strategy:
    type: Recreate
  selector:
    matchLabels:
      app.kubernetes.io/name: milvus
      app.kubernetes.io/instance: sfe-milvus
      component: "indexcoord"
  template:
    metadata:
      labels:
        app.kubernetes.io/name: milvus
        app.kubernetes.io/instance: sfe-milvus
        component: "indexcoord"
        
      annotations:
        checksum/config: 458a4230e55ba760cae507f3021c0cb3a591916782168da818983b549606eaa0
        
    spec:
      containers:
      - name: indexcoord
        image: "milvusdb/milvus:v2.0.0"
        imagePullPolicy: IfNotPresent
        args: [ "milvus", "run", "indexcoord" ]
        env:
        - name: CACHE_SIZE
          valueFrom:
            resourceFieldRef:
              divisor: 1Gi
              resource: limits.memory
        - name: GODEBUG
          value: madvdontneed=1
        ports:
          - name: indexcoord
            containerPort: 31000
            protocol: TCP
          - name: metrics
            containerPort: 9091
            protocol: TCP
        livenessProbe:
          httpGet:
            path: /healthz
            port: metrics
          initialDelaySeconds: 90
          periodSeconds: 30
          timeoutSeconds: 5
          successThreshold: 1
          failureThreshold: 5
        readinessProbe:
          httpGet:
            path: /healthz
            port: metrics
          initialDelaySeconds: 90
          periodSeconds: 10
          timeoutSeconds: 5
          successThreshold: 1
          failureThreshold: 5
        resources:
          {}
        volumeMounts:
        - name: milvus-config
          mountPath: /milvus/configs/milvus.yaml
          subPath: milvus.yaml
          readOnly: true

      volumes:
      - name: milvus-config
        configMap:
          name: sfe-milvus
---
# Source: milvus/templates/indexnode-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: sfe-milvus-indexnode
  labels:
    helm.sh/chart: milvus-3.0.5
    app.kubernetes.io/name: milvus
    app.kubernetes.io/instance: sfe-milvus
    app.kubernetes.io/version: "2.0.0"
    app.kubernetes.io/managed-by: Helm
    component: "indexnode"
    
  annotations:
    

spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: milvus
      app.kubernetes.io/instance: sfe-milvus
      component: "indexnode"
  template:
    metadata:
      labels:
        app.kubernetes.io/name: milvus
        app.kubernetes.io/instance: sfe-milvus
        component: "indexnode"
        
      annotations:
        checksum/config: 458a4230e55ba760cae507f3021c0cb3a591916782168da818983b549606eaa0
        
    spec:
      containers:
      - name: indexnode
        image: "milvusdb/milvus:v2.0.0"
        imagePullPolicy: IfNotPresent
        args: [ "milvus", "run", "indexnode" ]
        env:
        - name: CACHE_SIZE
          valueFrom:
            resourceFieldRef:
              divisor: 1Gi
              resource: limits.memory
        - name: GODEBUG
          value: madvdontneed=1
        ports:
          - name: indexnode
            containerPort: 21121
            protocol: TCP
          - name: metrics
            containerPort: 9091
            protocol: TCP
        livenessProbe:
          httpGet:
            path: /healthz
            port: metrics
          initialDelaySeconds: 90
          periodSeconds: 30
          timeoutSeconds: 5
          successThreshold: 1
          failureThreshold: 5
        readinessProbe:
          httpGet:
            path: /healthz
            port: metrics
          initialDelaySeconds: 90
          periodSeconds: 10
          timeoutSeconds: 5
          successThreshold: 1
          failureThreshold: 5
        resources:
          {}
        volumeMounts:
        - name: milvus-config
          mountPath: /milvus/configs/milvus.yaml
          subPath: milvus.yaml
          readOnly: true

      volumes:
      - name: milvus-config
        configMap:
          name: sfe-milvus
---
# Source: milvus/templates/proxy-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: sfe-milvus-proxy
  labels:
    helm.sh/chart: milvus-3.0.5
    app.kubernetes.io/name: milvus
    app.kubernetes.io/instance: sfe-milvus
    app.kubernetes.io/version: "2.0.0"
    app.kubernetes.io/managed-by: Helm
    component: "proxy"

    
  annotations:
    

spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: milvus
      app.kubernetes.io/instance: sfe-milvus
      component: "proxy"
  template:
    metadata:
      labels:
        app.kubernetes.io/name: milvus
        app.kubernetes.io/instance: sfe-milvus
        component: "proxy"
        
      annotations:
        checksum/config: 458a4230e55ba760cae507f3021c0cb3a591916782168da818983b549606eaa0
        
    spec:
      containers:
      - name: proxy
        image: "milvusdb/milvus:v2.0.0"
        imagePullPolicy: IfNotPresent
        args: [ "milvus", "run", "proxy" ]
        env:
          - name: CACHE_SIZE
            valueFrom:
              resourceFieldRef:
                resource: limits.memory
                divisor: 1Gi
          - name: GODEBUG
            value: madvdontneed=1
        ports:
          - name: milvus
            containerPort: 19530
            protocol: TCP
          - name: metrics
            containerPort: 9091
            protocol: TCP
        livenessProbe:
          httpGet:
            path: /healthz
            port: metrics
          initialDelaySeconds: 90
          periodSeconds: 30
          timeoutSeconds: 5
          successThreshold: 1
          failureThreshold: 5
        readinessProbe:
          httpGet:
            path: /healthz
            port: metrics
          initialDelaySeconds: 90
          periodSeconds: 10
          timeoutSeconds: 5
          successThreshold: 1
          failureThreshold: 5
        resources:
          {}
        volumeMounts:
        - name: milvus-config
          mountPath: /milvus/configs/milvus.yaml
          subPath: milvus.yaml
          readOnly: true

      volumes:
      - name: milvus-config
        configMap:
          name: sfe-milvus
---
# Source: milvus/templates/querycoord-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: sfe-milvus-querycoord
  labels:
    helm.sh/chart: milvus-3.0.5
    app.kubernetes.io/name: milvus
    app.kubernetes.io/instance: sfe-milvus
    app.kubernetes.io/version: "2.0.0"
    app.kubernetes.io/managed-by: Helm
    component: "querycoord"
    
  annotations:
    

spec:
  replicas: 1
  strategy:
    type: Recreate
  selector:
    matchLabels:
      app.kubernetes.io/name: milvus
      app.kubernetes.io/instance: sfe-milvus
      component: "querycoord"
  template:
    metadata:
      labels:
        app.kubernetes.io/name: milvus
        app.kubernetes.io/instance: sfe-milvus
        
        component: "querycoord"
      annotations:
        checksum/config: 458a4230e55ba760cae507f3021c0cb3a591916782168da818983b549606eaa0
        
    spec:
      containers:
      - name: querycoord
        image: "milvusdb/milvus:v2.0.0"
        imagePullPolicy: IfNotPresent
        args: [ "milvus", "run", "querycoord" ]
        env:
        - name: CACHE_SIZE
          valueFrom:
            resourceFieldRef:
              divisor: 1Gi
              resource: limits.memory
        - name: GODEBUG
          value: madvdontneed=1
        ports:
          - name: querycoord
            containerPort: 19531
            protocol: TCP
          - name: metrics
            containerPort: 9091
            protocol: TCP
        livenessProbe:
          httpGet:
            path: /healthz
            port: metrics
          initialDelaySeconds: 90
          periodSeconds: 30
          timeoutSeconds: 5
          successThreshold: 1
          failureThreshold: 5
        readinessProbe:
          httpGet:
            path: /healthz
            port: metrics
          initialDelaySeconds: 90
          periodSeconds: 10
          timeoutSeconds: 5
          successThreshold: 1
          failureThreshold: 5
        resources:
          {}
        volumeMounts:
        - name: milvus-config
          mountPath: /milvus/configs/milvus.yaml
          subPath: milvus.yaml
          readOnly: true

      volumes:
      - name: milvus-config
        configMap:
          name: sfe-milvus
---
# Source: milvus/templates/querynode-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: sfe-milvus-querynode
  labels:
    helm.sh/chart: milvus-3.0.5
    app.kubernetes.io/name: milvus
    app.kubernetes.io/instance: sfe-milvus
    app.kubernetes.io/version: "2.0.0"
    app.kubernetes.io/managed-by: Helm
    component: "querynode"
    
  annotations:
    

spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: milvus
      app.kubernetes.io/instance: sfe-milvus
      component: "querynode"
  template:
    metadata:
      labels:
        app.kubernetes.io/name: milvus
        app.kubernetes.io/instance: sfe-milvus
        component: "querynode"
        
      annotations:
        checksum/config: 458a4230e55ba760cae507f3021c0cb3a591916782168da818983b549606eaa0
        
    spec:
      containers:
      - name: querynode
        image: "milvusdb/milvus:v2.0.0"
        imagePullPolicy: IfNotPresent
        args: [ "milvus", "run", "querynode" ]
        env:
        - name: CACHE_SIZE
          valueFrom:
            resourceFieldRef:
              divisor: 1Gi
              resource: limits.memory
        - name: GODEBUG
          value: madvdontneed=1
        ports:
          - name: querynode
            containerPort: 21123
            protocol: TCP
          - name: metrics
            containerPort: 9091
            protocol: TCP
        livenessProbe:
          httpGet:
            path: /healthz
            port: metrics
          initialDelaySeconds: 90
          periodSeconds: 30
          timeoutSeconds: 5
          successThreshold: 1
          failureThreshold: 5
        readinessProbe:
          httpGet:
            path: /healthz
            port: metrics
          initialDelaySeconds: 90
          periodSeconds: 10
          timeoutSeconds: 5
          successThreshold: 1
          failureThreshold: 5
        resources:
          {}
        volumeMounts:
        - name: milvus-config
          mountPath: /milvus/configs/milvus.yaml
          subPath: milvus.yaml
          readOnly: true

      volumes:
      - name: milvus-config
        configMap:
          name: sfe-milvus
---
# Source: milvus/templates/rootcoord-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: sfe-milvus-rootcoord
  labels:
    helm.sh/chart: milvus-3.0.5
    app.kubernetes.io/name: milvus
    app.kubernetes.io/instance: sfe-milvus
    app.kubernetes.io/version: "2.0.0"
    app.kubernetes.io/managed-by: Helm
    component: "rootcoord"
    
  annotations:
    

spec:
  replicas: 1
  strategy:
    type: Recreate
  selector:
    matchLabels:
      app.kubernetes.io/name: milvus
      app.kubernetes.io/instance: sfe-milvus
      component: "rootcoord"
  template:
    metadata:
      labels:
        app.kubernetes.io/name: milvus
        app.kubernetes.io/instance: sfe-milvus
        component: "rootcoord"
        
      annotations:
        checksum/config: 458a4230e55ba760cae507f3021c0cb3a591916782168da818983b549606eaa0
        
    spec:
      containers:
      - name: rootcoord
        image: "milvusdb/milvus:v2.0.0"
        imagePullPolicy: IfNotPresent
        args: [ "milvus", "run", "rootcoord" ]
        env:
        - name: CACHE_SIZE
          valueFrom:
            resourceFieldRef:
              divisor: 1Gi
              resource: limits.memory
        - name: GODEBUG
          value: madvdontneed=1
        ports:
          - name: rootcoord
            containerPort: 53100
            protocol: TCP
          - name: metrics
            containerPort: 9091
            protocol: TCP
        livenessProbe:
          httpGet:
            path: /healthz
            port: metrics
          initialDelaySeconds: 90
          periodSeconds: 30
          timeoutSeconds: 5
          successThreshold: 1
          failureThreshold: 5
        readinessProbe:
          httpGet:
            path: /healthz
            port: metrics
          initialDelaySeconds: 90
          periodSeconds: 10
          timeoutSeconds: 5
          successThreshold: 1
          failureThreshold: 5
        resources:
          {}
        volumeMounts:
        - name: milvus-config
          mountPath: /milvus/configs/milvus.yaml
          subPath: milvus.yaml
          readOnly: true

      volumes:
      - name: milvus-config
        configMap:
          name: sfe-milvus
---
# Source: milvus/charts/etcd/templates/statefulset.yaml
apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: sfe-milvus-etcd
  namespace: default
  labels:
    app.kubernetes.io/name: etcd
    helm.sh/chart: etcd-6.3.3
    app.kubernetes.io/instance: sfe-milvus
    app.kubernetes.io/managed-by: Helm
spec:
  replicas: 3
  selector:
    matchLabels:
      app.kubernetes.io/name: etcd
      app.kubernetes.io/instance: sfe-milvus
  serviceName: sfe-milvus-etcd-headless
  podManagementPolicy: Parallel
  updateStrategy:
    type: RollingUpdate
  template:
    metadata:
      labels:
        app.kubernetes.io/name: etcd
        helm.sh/chart: etcd-6.3.3
        app.kubernetes.io/instance: sfe-milvus
        app.kubernetes.io/managed-by: Helm
      annotations:
    spec:
      
      affinity:
        podAffinity:
          
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
            - podAffinityTerm:
                labelSelector:
                  matchLabels:
                    app.kubernetes.io/name: etcd
                    app.kubernetes.io/instance: sfe-milvus
                namespaces:
                  - "default"
                topologyKey: kubernetes.io/hostname
              weight: 1
        nodeAffinity:
          
      securityContext:
        fsGroup: 1001
      serviceAccountName: "default"
      containers:
        - name: etcd
          image: docker.io/bitnami/etcd:3.5.0-debian-10-r24
          imagePullPolicy: "IfNotPresent"
          securityContext:
            runAsNonRoot: true
            runAsUser: 1001
          env:
            - name: BITNAMI_DEBUG
              value: "false"
            - name: MY_POD_IP
              valueFrom:
                fieldRef:
                  fieldPath: status.podIP
            - name: MY_POD_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.name
            - name: ETCDCTL_API
              value: "3"
            - name: ETCD_ON_K8S
              value: "yes"
            - name: ETCD_START_FROM_SNAPSHOT
              value: "no"
            - name: ETCD_DISASTER_RECOVERY
              value: "no"
            - name: ETCD_NAME
              value: "$(MY_POD_NAME)"
            - name: ETCD_DATA_DIR
              value: "/bitnami/etcd/data"
            - name: ETCD_LOG_LEVEL
              value: "info"
            - name: ALLOW_NONE_AUTHENTICATION
              value: "yes"
            - name: ETCD_ADVERTISE_CLIENT_URLS
              value: "http://$(MY_POD_NAME).sfe-milvus-etcd-headless.default.svc.cluster.local:2379"
            - name: ETCD_LISTEN_CLIENT_URLS
              value: "http://0.0.0.0:2379"
            - name: ETCD_INITIAL_ADVERTISE_PEER_URLS
              value: "http://$(MY_POD_NAME).sfe-milvus-etcd-headless.default.svc.cluster.local:2380"
            - name: ETCD_LISTEN_PEER_URLS
              value: "http://0.0.0.0:2380"
            - name: ETCD_AUTO_COMPACTION_MODE
              value: "revision"
            - name: ETCD_AUTO_COMPACTION_RETENTION
              value: "1000"
            - name: ETCD_INITIAL_CLUSTER_TOKEN
              value: "etcd-cluster-k8s"
            - name: ETCD_INITIAL_CLUSTER_STATE
              value: "new"
            - name: ETCD_INITIAL_CLUSTER
              value: "sfe-milvus-etcd-0=http://sfe-milvus-etcd-0.sfe-milvus-etcd-headless.default.svc.cluster.local:2380,sfe-milvus-etcd-1=http://sfe-milvus-etcd-1.sfe-milvus-etcd-headless.default.svc.cluster.local:2380,sfe-milvus-etcd-2=http://sfe-milvus-etcd-2.sfe-milvus-etcd-headless.default.svc.cluster.local:2380"
            - name: ETCD_CLUSTER_DOMAIN
              value: "sfe-milvus-etcd-headless.default.svc.cluster.local"
            - name: ETCD_QUOTA_BACKEND_BYTES
              value: "4294967296"
            - name: ETCD_HEARTBEAT_INTERVAL
              value: "500"
            - name: ETCD_ELECTION_TIMEOUT
              value: "2500"
          envFrom:
          ports:
            - name: client
              containerPort: 2379
              protocol: TCP
            - name: peer
              containerPort: 2380
              protocol: TCP
          livenessProbe:
            exec:
              command:
                - /opt/bitnami/scripts/etcd/healthcheck.sh
            initialDelaySeconds: 60
            periodSeconds: 30
            timeoutSeconds: 5
            successThreshold: 1
            failureThreshold: 5
          readinessProbe:
            exec:
              command:
                - /opt/bitnami/scripts/etcd/healthcheck.sh
            initialDelaySeconds: 60
            periodSeconds: 10
            timeoutSeconds: 5
            successThreshold: 1
            failureThreshold: 5
          lifecycle:
            preStop:
              exec:
                command:
                  - /opt/bitnami/scripts/etcd/prestop.sh
          resources:
            limits: {}
            requests: {}
          volumeMounts:
            - name: data
              mountPath: /bitnami/etcd
      volumes:
  volumeClaimTemplates:
    - metadata:
        name: data
      spec:
        accessModes:
          - "ReadWriteOnce"
        resources:
          requests:
            storage: "10Gi"
---
# Source: milvus/charts/pulsar/templates/bookkeeper-statefulset.yaml
#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#


apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: "sfe-milvus-pulsar-bookkeeper"
  namespace: default
  labels:
    app: pulsar
    chart: pulsar-1.0.31
    release: sfe-milvus
    heritage: Helm
    component: bookkeeper
    cluster: sfe-milvus-pulsar
spec:
  serviceName: "sfe-milvus-pulsar-bookkeeper"
  replicas: 3
  selector:
    matchLabels:
      app: pulsar
      release: sfe-milvus
      component: bookkeeper
  updateStrategy:
    type: RollingUpdate
  podManagementPolicy: OrderedReady
  template:
    metadata:
      labels:
        app: pulsar
        release: sfe-milvus
        component: bookkeeper
        cluster: sfe-milvus-pulsar
      annotations:
        prometheus.io/port: "8000"
        prometheus.io/scrape: "true"
    spec:
      affinity:
      terminationGracePeriodSeconds: 60
      initContainers:
      # This init container will wait for zookeeper to be ready before
      # deploying the bookies
      - name: wait-zookeeper-ready
        image: "apachepulsar/pulsar:2.8.2"
        imagePullPolicy: IfNotPresent
        command: ["sh", "-c"]
        args:
          - >-
            until bin/pulsar zookeeper-shell -server sfe-milvus-pulsar-zookeeper ls /admin/clusters | grep "^\[.*sfe-milvus-pulsar.*\]"; do
              sleep 3;
            done;
      # This initContainer will make sure that the bookkeeper
      # metadata is in zookeeper
      - name: pulsar-bookkeeper-metaformat
        image: "apachepulsar/pulsar:2.8.2"
        imagePullPolicy: IfNotPresent
        command: ["sh", "-c"]
        args:
        - >
          bin/apply-config-from-env.py conf/bookkeeper.conf &&
          bin/apply-config-from-env.py conf/bkenv.sh &&
          bin/bookkeeper shell metaformat --nonInteractive || true;
        envFrom:
        - configMapRef:
            name: "sfe-milvus-pulsar-bookkeeper"
      containers:
      - name: "sfe-milvus-pulsar-bookkeeper"
        image: "apachepulsar/pulsar:2.8.2"
        imagePullPolicy: IfNotPresent
        readinessProbe:
          httpGet:
            path: /api/v1/bookie/is_ready
            port: 8000
          initialDelaySeconds: 10 
          periodSeconds:  30 
        livenessProbe:
          httpGet:
            path: /api/v1/bookie/is_ready
            port: 8000
          initialDelaySeconds: 10 
          periodSeconds:  30
        resources:
          requests:
            cpu: 1
            memory: 2048Mi
        command: ["sh", "-c"]
        args:
        - >
          bin/apply-config-from-env.py conf/bookkeeper.conf &&
          bin/apply-config-from-env.py conf/bkenv.sh &&
          bin/apply-config-from-env.py conf/pulsar_env.sh &&
          exec bin/pulsar bookie
        ports:
        - name: client
          containerPort: 3181
        envFrom:
        - configMapRef:
            name: "sfe-milvus-pulsar-bookkeeper"
        volumeMounts:
        - name: "sfe-milvus-pulsar-bookkeeper-journal"
          mountPath: /pulsar/data/bookkeeper/journal
        - name: "sfe-milvus-pulsar-bookkeeper-ledgers"
          mountPath: /pulsar/data/bookkeeper/ledgers
      volumes:
  volumeClaimTemplates:
  - metadata:
      name: "sfe-milvus-pulsar-bookkeeper-journal"
    spec:
      accessModes: [ "ReadWriteOnce" ]
      resources:
        requests:
          storage: 100Gi
  - metadata:
      name: "sfe-milvus-pulsar-bookkeeper-ledgers"
    spec:
      accessModes: [ "ReadWriteOnce" ]
      resources:
        requests:
          storage: 200Gi
---
# Source: milvus/charts/pulsar/templates/zookeeper/zookeeper-statefulset.yaml
#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#

apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: "sfe-milvus-pulsar-zookeeper"
  namespace: default
  labels:
    app: pulsar
    chart: pulsar-1.0.31
    release: sfe-milvus
    heritage: Helm
    component: zookeeper
    cluster: sfe-milvus-pulsar
spec:
  serviceName: "sfe-milvus-pulsar-zookeeper"
  replicas: 3
  selector:
    matchLabels:
      app: pulsar
      release: sfe-milvus
      component: zookeeper
  updateStrategy:
    type: RollingUpdate
  podManagementPolicy: OrderedReady
  template:
    metadata:
      labels:
        app: pulsar
        release: sfe-milvus
        component: zookeeper
        cluster: sfe-milvus-pulsar
      annotations:
        prometheus.io/port: "8000"
        prometheus.io/scrape: "true"
    spec:
      affinity:
      terminationGracePeriodSeconds: 60
      containers:
      - name: "sfe-milvus-pulsar-zookeeper"
        image: "apachepulsar/pulsar:2.8.2"
        imagePullPolicy: IfNotPresent
        resources:
          requests:
            cpu: 0.3
            memory: 1024Mi
        command: ["sh", "-c"]
        args:
        - >
          bin/apply-config-from-env.py conf/zookeeper.conf &&
          bin/apply-config-from-env.py conf/pulsar_env.sh &&
          bin/generate-zookeeper-config.sh conf/zookeeper.conf &&
          exec bin/pulsar zookeeper
        ports:
        - name: client
          containerPort: 2181
        - name: server
          containerPort: 2888
        - name: leader-election
          containerPort: 3888
        env:
        - name: ZOOKEEPER_SERVERS
          value:
            sfe-milvus-pulsar-zookeeper-0,sfe-milvus-pulsar-zookeeper-1,sfe-milvus-pulsar-zookeeper-2
        envFrom:
        - configMapRef:
            name: "sfe-milvus-pulsar-zookeeper"
        readinessProbe:
          exec:
            command:
            - "bin/pulsar-zookeeper-ruok.sh"
          initialDelaySeconds: 10
          timeoutSeconds: 30
        livenessProbe:
          exec:
            command:
            - "bin/pulsar-zookeeper-ruok.sh"
          initialDelaySeconds: 10
          timeoutSeconds: 30
        volumeMounts:
        - name: "sfe-milvus-pulsar-zookeeper-data"
          mountPath: /pulsar/data
      volumes:
  volumeClaimTemplates:
  - metadata:
      name: "sfe-milvus-pulsar-zookeeper-data"
    spec:
      accessModes: [ "ReadWriteOnce" ]
      resources:
        requests:
          storage: 5Gi
---
# Source: milvus/charts/pulsar/templates/zookeeper/zookeeper-metadata.yaml
#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
apiVersion: batch/v1
kind: Job
metadata:
  name: "sfe-milvus-pulsar-zookeeper-metadata"
  namespace: default
  labels:
    app: pulsar
    chart: pulsar-1.0.31
    release: sfe-milvus
    heritage: Helm
    component: zookeeper-metadata
    cluster: sfe-milvus-pulsar
spec:
  template:
    spec:
      initContainers:
      - name: wait-zookeeper-ready
        image: "apachepulsar/pulsar:2.8.2"
        imagePullPolicy: IfNotPresent
        command: ["sh", "-c"]
        args:
          - >-
            until nslookup sfe-milvus-pulsar-zookeeper-2.sfe-milvus-pulsar-zookeeper.default; do
              sleep 3;
            done;
      containers:
      - name: "sfe-milvus-pulsar-zookeeper-metadata"
        image: "apachepulsar/pulsar:2.8.2"
        imagePullPolicy: IfNotPresent
        command: ["sh", "-c"]
        args:
          - >
            bin/pulsar initialize-cluster-metadata \
              --cluster sfe-milvus-pulsar \
              --zookeeper sfe-milvus-pulsar-zookeeper \
              --configuration-store sfe-milvus-pulsar-zookeeper \
              --web-service-url http://sfe-milvus-pulsar-broker.default:8080/ \
              --broker-service-url pulsar://sfe-milvus-pulsar-broker.default:6650/ || true;
      restartPolicy: Never
---
# Source: milvus/charts/pulsar/templates/beamwh-configmap.yaml
#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
---
# Source: milvus/charts/pulsar/templates/beamwh-deployment.yaml
#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
---
# Source: milvus/charts/pulsar/templates/bookkeeper-storageclass.yaml
#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
---
# Source: milvus/charts/pulsar/templates/bookkeeper-storageclass.yaml
---
# End for if persistence for whole file
---
# Source: milvus/charts/pulsar/templates/broker-sts/broker-sts-configmap.yaml
#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
---
# Source: milvus/charts/pulsar/templates/broker-sts/broker-sts-pdb.yaml
#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
---
# Source: milvus/charts/pulsar/templates/broker-sts/broker-sts-service.yaml
#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
---
# Source: milvus/charts/pulsar/templates/broker-sts/broker-sts-statefulset.yaml
#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
---
# Source: milvus/charts/pulsar/templates/deprecated/dashboard-deployment.yaml
#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
# trigger a build
---
# Source: milvus/charts/pulsar/templates/deprecated/dashboard-service.yaml
#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
---
# Source: milvus/charts/pulsar/templates/deprecated/grafana-deployment.yaml
#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
---
# Source: milvus/charts/pulsar/templates/deprecated/grafana-service.yaml
#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
---
# Source: milvus/charts/pulsar/templates/deprecated/latencyMonitor-deployment.yaml
#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
---
# Source: milvus/charts/pulsar/templates/deprecated/latencyMonitor-service.yaml
#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
---
# Source: milvus/charts/pulsar/templates/deprecated/prometheus-configmap.yaml
#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
---
# Source: milvus/charts/pulsar/templates/deprecated/prometheus-deployment.yaml
#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
---
# Source: milvus/charts/pulsar/templates/deprecated/prometheus-pvc.yaml
#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
---
# Source: milvus/charts/pulsar/templates/deprecated/prometheus-rbac.yaml
#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
---
# Source: milvus/charts/pulsar/templates/deprecated/prometheus-service.yaml
#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
---
# Source: milvus/charts/pulsar/templates/deprecated/prometheus-storageclass.yaml
#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
---
# Source: milvus/charts/pulsar/templates/deprecated/state-configmap.yaml
#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
---
# Source: milvus/charts/pulsar/templates/deprecated/state-service.yaml
#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
---
# Source: milvus/charts/pulsar/templates/deprecated/state-statefulset.yaml
#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
---
# Source: milvus/charts/pulsar/templates/deprecated/state-storageclass.yaml
#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
---
# Source: milvus/charts/pulsar/templates/function-configmap.yaml
#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
---
# Source: milvus/charts/pulsar/templates/function-extra-configmap.yaml
#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
---
# Source: milvus/charts/pulsar/templates/function-pdb.yaml
#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
---
# Source: milvus/charts/pulsar/templates/function-service.yaml
#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
---
# Source: milvus/charts/pulsar/templates/function-statefulset.yaml
#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
---
# Source: milvus/charts/pulsar/templates/function-storageclass.yaml
#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
---
# Source: milvus/charts/pulsar/templates/pulsar-express-configmap.yaml
#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
---
# Source: milvus/charts/pulsar/templates/pulsar-express-deployment.yaml
#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
---
# Source: milvus/charts/pulsar/templates/pulsar-express-service.yaml
#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
---
# Source: milvus/charts/pulsar/templates/zookeeper/zookeeper-storageclass.yaml
#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
---
# Source: milvus/charts/pulsar/templates/zoonavigator/zoonavigator-deployment.yaml
#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
---
# Source: milvus/charts/pulsar/templates/zoonavigator/zoonavigator-service.yaml
#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
